<html>
    <head>
        
        <title> {{title}} - Hive </title>
        <link rel="stylesheet" type="text/css" href="Post_Style.css">
        <script src="https://kit.fontawesome.com/4c2cf73d4b.js" crossorigin="anonymous"></script>
        <script src="https://code.jquery.com/jquery-3.7.0.min.js" type="text/javascript"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" 
            integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" 
            crossorigin="anonymous"></script>
        <script src="voting.js"></script>
        
        <style>

            body{
                margin: 0;
                padding: 0;
                background: #36393e;
            }
            
        </style>

    </head>

    <body>

        <div id = "navbar">
            <img id = "hive-icon" src="Hive_Icon.png" alt="Hive_Icon">
            <span id = "hive"> HIVE </span>
            <i class = "fa-solid fa-magnifying-glass" onclick = "search()"></i>
            <script>
                function search() {
                    var value = document.getElementById("search-bar").value;
                    var option = document.querySelector("#list option[value='" + value + "']");
                    if (option != null) {
                        window.location.href = "/View_Profile/" + value;
                    } else
                        alert("no results found");
                }
            </script>
            <input type="text" id = "search-bar" list = "list" name="search" placeholder = "search profile" size = "100">
            <datalist id="list">
                {{#each users}}
                    <option value="{{username}}">
                {{/each}}
            </datalist>
            <div id = "nav-links">
                <a class = "nav-link" href="Registered_Homepage.html"> Home </a> 
                <a class = "nav-link" href = "ProfileMain.html"> Profile </a> 
                <a class = "nav-link" href = "RegisterLogin.html"> Logout </a> 
            </div>
        </div>


        <div id="profile-nav">

            <div id="profile-navlinks">
                <span class="prof-link" id="Posts">Post</span>
            </div>

        </div>

        <!--- POST --->
        {{#each posts}} 
            <div class = "post">
                <div class = "post-header">
                    <img  class = "user-icon" src="{{this.filename}}" alt="user_icon" width="32" height="32">
                    <a class = "post-username" href = "/View_Profile/{{username}}" title = "view profile"> {{username}} </a>
                    <p class = "dot"> • </p>
                    <a class = "post-title" href = "/View_Profile/{{username}}" title = "view post"> {{title}} </a>
                </div>
                <br> 
                <p class = "post-content"> {{content}} </p>
                <br>
                <div class = "post-footer">
                    <a href = "/View_Profile/{{username}}" title = "comment"><i class="fa-solid fa-comment" style="color: #ffd201;"></i></a>
                    <span class = "comment-count"> {{commentcount}} </span>
                    {{#if upvoted}}
                        <i class="fa-solid fa-angle-up" title = "upvote" style="color: green; cursor: pointer;"></i>
                    {{else}}
                        <i class="fa-solid fa-angle-up" title = "upvote" style="color: #ffd201; cursor: pointer;"></i>
                    {{/if}}
                    <span class = "vote-count" name = "votes"> {{votes}} </span>
                    {{#if downvoted}}
                        <i class="fa-solid fa-angle-down" title = "downvote" style="color: red; margin-right: 50px; cursor: pointer;"></i>
                    {{else}}
                        <i class="fa-solid fa-angle-down" title = "downvote" style="color: #ffd201; margin-right: 50px; cursor: pointer;"></i>
                    {{/if}}
                </div> 
            </div>
        {{/each}}


        <!--- COMMENT --->
        <div class="create-comment">
            <form>

            <!-- SUBMIT COMMENT -->
            
            <div class="create-content">

                <div class = "post-header">
                    <p class="comment-title"> Create Comment </p>
                    <p class = "dot"> • </p>
                    <a class = "post-title" href = {{title}}> {{title}} </a>
                </div>
                <br> <br> <br>
                
                Name: <input type="text" id="name" style="font-family: Roboto, sans-serif; font-size: 15px; background-color: #484848; color: white; border-radius: 5px;" required><br/>

                <textarea class="comment-content" rows="5" cols="103" id="bodyText" placeholder="Write a comment" style="font-family: Roboto, sans-serif; font-size: 15px; background-color: #484848; color: white; border-radius: 5px;" required>
                </textarea>
                <input class="create-comment-btn" id="addComment" type="button" value="Add Comment" />
                <div class = "create-footer">
                    
                </div>
                <br>
            
            </div>
                

            </form>
         </div>
        <br>

        <!-- COMMENTS LIST -->

        <div id="comment-list">

            <div id="profile-navlinks">
                <span class="prof-link" id="Comments">Comments</span>
            </div>

            <!-- PLACEHOLDER FOR CREATE COMMENT -->
            <div class="comment-container">
                <div class="comment" id="container">
                    <!-- COMMENTS BY THE USER WILL BE APPENDED HERE -->
                </div>
            </div>

        </div>
        <br>

        <script src="Create-Comment.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>

    </body>

</html>